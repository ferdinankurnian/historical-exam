[gd_scene load_steps=31 format=3 uid="uid://dqmcq0rwgmf2y"]

[ext_resource type="Script" path="res://script/class.gd" id="1_dgb12"]
[ext_resource type="PackedScene" uid="uid://bphxc1fm5eojp" path="res://scenes/player.tscn" id="2_2jkle"]
[ext_resource type="Texture2D" uid="uid://p21irefd0is6" path="res://assets/floor/floor.png" id="2_qn3f0"]
[ext_resource type="Texture2D" uid="uid://clmkdems36it3" path="res://assets/misc/table.png" id="3_hot0j"]
[ext_resource type="Texture2D" uid="uid://d4ji3dxihln2o" path="res://assets/wall/wall.png" id="3_p6n16"]
[ext_resource type="PackedScene" uid="uid://bwelqirj1u0jy" path="res://scenes/pause_menu.tscn" id="3_r25av"]
[ext_resource type="Texture2D" uid="uid://bebh1g06ahxke" path="res://assets/wall/ext_class.png" id="4_sghvm"]
[ext_resource type="Texture2D" uid="uid://cyxwvcdnbtnq7" path="res://assets/floor/floor_carpeted.png" id="6_ooa8d"]
[ext_resource type="PackedScene" uid="uid://cipafutq2el23" path="res://scenes/npc/teacher.tscn" id="9_1vf5t"]
[ext_resource type="PackedScene" uid="uid://c55jy81kcmm2" path="res://scenes/npc/classmate_1.tscn" id="9_bmbdk"]
[ext_resource type="PackedScene" uid="uid://bjxkkoi73rath" path="res://scenes/npc/classmate_2.tscn" id="11_714xq"]
[ext_resource type="PackedScene" uid="uid://64t37fvx64xp" path="res://scenes/npc/classmate_3.tscn" id="12_pcqvc"]
[ext_resource type="PackedScene" uid="uid://v7b5wyk16cio" path="res://scenes/npc/classmate_4.tscn" id="13_3icma"]
[ext_resource type="PackedScene" uid="uid://dpvr0ifj0xlqu" path="res://scenes/npc/classmate_5.tscn" id="14_0jrxp"]
[ext_resource type="PackedScene" uid="uid://cg8bcy5sq4tup" path="res://scenes/hud.tscn" id="15_4u2hr"]
[ext_resource type="PackedScene" uid="uid://cjx5akusr2gh1" path="res://scenes/textbox.tscn" id="16_wgcdo"]

[sub_resource type="TileMapPattern" id="TileMapPattern_4d0p4"]
tile_data = PackedInt32Array(0, 2, 0, 65536, 2, 1)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_fso84"]
texture = ExtResource("2_qn3f0")
0:0/0 = 0
1:0/0 = 0
0:1/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_531sj"]
texture = ExtResource("3_hot0j")
texture_region_size = Vector2i(15, 15)
0:0/size_in_atlas = Vector2i(2, 2)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-12.8382, -9.26031, 13.1188, -9.40062, 13.1188, 11.2246, -13.1188, 11.2246)
2:0/size_in_atlas = Vector2i(2, 2)
2:0/0 = 0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-12.8382, -6.31385, -10.5932, -10.1022, 10.4529, -9.96185, 12.9785, -6.31385, 13.1188, 6.31385, 10.8739, 9.40062, 6.94523, 11.2246, -6.24369, 11.2246, -10.7335, 10.1022, -13.0476, 6.03037)
0:2/size_in_atlas = Vector2i(2, 2)
0:2/0 = 0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-12.9785, -0.841846, 13.2591, -0.982155, 13.1188, 11.2246, -13.1188, 11.2246)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_1twlt"]
texture = ExtResource("3_p6n16")
0:0/0 = 0
1:0/0 = 0
1:1/0 = 0
0:1/0 = 0
0:2/0 = 0
1:2/0 = 0
1:3/0 = 0
0:3/0 = 0
2:3/0 = 0
2:2/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_8bn58"]
texture = ExtResource("4_sghvm")
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_pakqt"]
texture = ExtResource("6_ooa8d")
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
2:1/0 = 0
1:1/0 = 0
0:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
2:3/0 = 0
1:3/0 = 0
0:3/0 = 0
0:4/0 = 0
1:4/0 = 0
2:4/0 = 0
2:5/0 = 0
1:5/0 = 0
0:5/0 = 0
0:6/0 = 0

[sub_resource type="TileSet" id="TileSet_65qkw"]
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_fso84")
sources/2 = SubResource("TileSetAtlasSource_1twlt")
sources/3 = SubResource("TileSetAtlasSource_8bn58")
sources/1 = SubResource("TileSetAtlasSource_531sj")
sources/4 = SubResource("TileSetAtlasSource_pakqt")
pattern_0 = SubResource("TileMapPattern_4d0p4")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_0km2x"]
size = Vector2(25.5, 30)

[sub_resource type="CircleShape2D" id="CircleShape2D_w1lo1"]
radius = 24.0

[sub_resource type="Animation" id="Animation_ikcee"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Blackout:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Blackout:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_uscx4"]
resource_name = "blackouttext"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Blackout:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.7, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Blackout:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}

[sub_resource type="Animation" id="Animation_v7gsx"]
resource_name = "changescene_in"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Blackout:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Blackout:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0333333),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [false, true]
}

[sub_resource type="Animation" id="Animation_a34yb"]
resource_name = "changescene_out"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Blackout:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Blackout:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.0333333, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_aaekd"]
_data = {
"RESET": SubResource("Animation_ikcee"),
"blackouttext": SubResource("Animation_uscx4"),
"changescene_in": SubResource("Animation_v7gsx"),
"changescene_out": SubResource("Animation_a34yb")
}

[node name="class" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_dgb12")

[node name="ColorRect" type="ColorRect" parent="."]
offset_left = -1070.0
offset_top = -651.0
offset_right = 2418.0
offset_bottom = 1377.0
color = Color(0.0646965, 0.0646965, 0.0646965, 1)

[node name="TileMap" type="TileMap" parent="."]
y_sort_enabled = true
tile_set = SubResource("TileSet_65qkw")
format = 2
layer_0/name = "floor"
layer_0/tile_data = PackedInt32Array(589851, 65536, 0, 655387, 65536, 0, 720923, 65536, 0, 786459, 65536, 0, 851995, 65536, 0, 917531, 65536, 0, 983067, 65536, 0, 1048603, 65536, 0, 1114139, 65536, 0, 1179675, 65536, 0, 1245211, 65536, 0, 1310747, 65536, 0, 1376283, 65536, 0, 1441819, 65536, 0, 1507355, 65536, 0, 1572891, 65536, 0, 1638427, 65536, 0, 1703963, 65536, 0, 589852, 65536, 0, 655388, 65536, 0, 720924, 65536, 0, 786460, 65536, 0, 851996, 4, 0, 917532, 4, 1, 983068, 4, 1, 1048604, 4, 1, 1114140, 4, 1, 1179676, 4, 1, 1245212, 4, 1, 1310748, 4, 1, 1376284, 4, 1, 1441820, 4, 1, 1507356, 4, 1, 1572892, 4, 1, 1638428, 4, 2, 1703964, 65536, 0, 589853, 65536, 0, 655389, 65536, 0, 720925, 65536, 0, 786461, 65536, 0, 851997, 65540, 0, 917533, 65540, 1, 983069, 65540, 1, 1048605, 65540, 1, 1114141, 65540, 1, 1179677, 65540, 1, 1245213, 65540, 1, 1310749, 65540, 1, 1376285, 65540, 1, 1441821, 65540, 1, 1507357, 65540, 1, 1572893, 65540, 1, 1638429, 65540, 2, 1703965, 65536, 0, 589854, 65536, 0, 655390, 65536, 0, 720926, 65536, 0, 786462, 65536, 0, 851998, 65540, 0, 917534, 65540, 1, 983070, 65540, 1, 1048606, 65540, 1, 1114142, 65540, 1, 1179678, 65540, 1, 1245214, 65540, 1, 1310750, 65540, 1, 1376286, 65540, 1, 1441822, 65540, 1, 1507358, 4, 6, 1572894, 65540, 1, 1638430, 65540, 2, 1703966, 65536, 0, 589855, 65536, 0, 655391, 65536, 0, 720927, 65536, 0, 786463, 65536, 0, 851999, 65540, 0, 917535, 65540, 1, 983071, 65540, 1, 1048607, 4, 6, 1114143, 65540, 1, 1179679, 65540, 1, 1245215, 65540, 1, 1310751, 4, 6, 1376287, 65540, 1, 1441823, 65540, 1, 1507359, 65540, 1, 1572895, 65540, 1, 1638431, 65540, 2, 1703967, 65536, 0, 589856, 65536, 0, 655392, 65536, 0, 720928, 65536, 0, 786464, 65536, 0, 852000, 65540, 0, 917536, 65540, 1, 983072, 65540, 1, 1048608, 65540, 1, 1114144, 65540, 1, 1179680, 65540, 1, 1245216, 65540, 1, 1310752, 65540, 1, 1376288, 65540, 1, 1441824, 65540, 1, 1507360, 65540, 1, 1572896, 65540, 1, 1638432, 65540, 2, 1703968, 65536, 0, 589857, 65536, 0, 655393, 65536, 0, 720929, 65536, 0, 786465, 65536, 0, 852001, 65540, 0, 917537, 65540, 1, 983073, 65540, 1, 1048609, 65540, 1, 1114145, 65540, 1, 1179681, 65540, 1, 1245217, 65540, 1, 1310753, 65540, 1, 1376289, 65540, 1, 1441825, 65540, 1, 1507361, 65540, 1, 1572897, 4, 6, 1638433, 65540, 2, 1703969, 65536, 0, 589858, 65536, 0, 655394, 65536, 0, 720930, 65536, 0, 786466, 65536, 0, 852002, 65540, 0, 917538, 65540, 1, 983074, 65540, 1, 1048610, 65540, 1, 1114146, 65540, 1, 1179682, 65540, 1, 1245218, 65540, 1, 1310754, 65540, 1, 1376290, 65540, 1, 1441826, 65540, 1, 1507362, 65540, 1, 1572898, 65540, 1, 1638434, 65540, 2, 1703970, 65536, 0, 589859, 65536, 0, 655395, 65536, 0, 720931, 65536, 0, 786467, 65536, 0, 852003, 65540, 0, 917539, 65540, 1, 983075, 65540, 1, 1048611, 65540, 1, 1114147, 65540, 1, 1179683, 65540, 1, 1245219, 65540, 1, 1310755, 65540, 1, 1376291, 65540, 1, 1441827, 65540, 1, 1507363, 65540, 1, 1572899, 65540, 1, 1638435, 65540, 2, 1703971, 65536, 0, 589860, 65536, 0, 655396, 65536, 0, 720932, 65536, 0, 786468, 65536, 0, 852004, 65540, 0, 917540, 65540, 1, 983076, 65540, 1, 1048612, 65540, 1, 1114148, 65540, 1, 1179684, 65540, 1, 1245220, 65540, 1, 1310756, 65540, 1, 1376292, 65540, 1, 1441828, 65540, 1, 1507364, 4, 6, 1572900, 65540, 1, 1638436, 65540, 2, 1703972, 65536, 0, 589861, 65536, 0, 655397, 65536, 0, 720933, 65536, 0, 786469, 65536, 0, 852005, 65540, 0, 917541, 65540, 1, 983077, 65540, 1, 1048613, 4, 6, 1114149, 65540, 1, 1179685, 65540, 1, 1245221, 65540, 1, 1310757, 65540, 1, 1376293, 65540, 1, 1441829, 65540, 1, 1507365, 65540, 1, 1572901, 65540, 1, 1638437, 65540, 2, 1703973, 65536, 0, 589862, 65536, 0, 655398, 65536, 0, 720934, 65536, 0, 786470, 65536, 0, 852006, 65540, 0, 917542, 65540, 1, 983078, 65540, 1, 1048614, 65540, 1, 1114150, 65540, 1, 1179686, 65540, 1, 1245222, 65540, 1, 1310758, 4, 6, 1376294, 65540, 1, 1441830, 65540, 1, 1507366, 65540, 1, 1572902, 65540, 1, 1638438, 65540, 2, 1703974, 65536, 0, 589863, 65536, 0, 655399, 65536, 0, 720935, 65536, 0, 786471, 65536, 0, 852007, 65540, 0, 917543, 65540, 1, 983079, 65540, 1, 1048615, 65540, 1, 1114151, 65540, 1, 1179687, 65540, 1, 1245223, 65540, 1, 1310759, 65540, 1, 1376295, 65540, 1, 1441831, 65540, 1, 1507367, 65540, 1, 1572903, 4, 6, 1638439, 65540, 2, 1703975, 65536, 0, 589864, 65536, 0, 655400, 65536, 0, 720936, 65536, 0, 786472, 65536, 0, 852008, 131076, 0, 917544, 131076, 1, 983080, 131076, 1, 1048616, 131076, 1, 1114152, 131076, 1, 1179688, 131076, 1, 1245224, 131076, 1, 1310760, 131076, 1, 1376296, 131076, 1, 1441832, 131076, 1, 1507368, 131076, 1, 1572904, 131076, 1, 1638440, 131076, 2, 1703976, 65536, 0, 589865, 65536, 0, 655401, 65536, 0, 720937, 65536, 0, 786473, 65536, 0, 852009, 65536, 0, 917545, 65536, 0, 983081, 65536, 0, 1048617, 65536, 0, 1114153, 65536, 0, 1179689, 65536, 0, 1245225, 65536, 0, 1310761, 65536, 0, 1376297, 65536, 0, 1441833, 65536, 0, 1507369, 65536, 0, 1572905, 65536, 0, 1638441, 65536, 0, 1703977, 65536, 0, 458779, 2, 0, 524315, 2, 1, 458780, 2, 0, 524316, 2, 1, 458781, 2, 0, 524317, 2, 1, 458782, 2, 0, 524318, 2, 1, 458783, 2, 0, 524319, 2, 1, 458784, 2, 0, 524320, 2, 1, 458788, 2, 0, 524324, 2, 1, 458789, 2, 0, 524325, 2, 1, 458790, 2, 0, 524326, 2, 1, 458791, 2, 0, 524327, 2, 1, 458792, 2, 0, 524328, 2, 1, 458793, 2, 0, 524329, 2, 1, 458785, 2, 2, 458786, 65538, 2, 458787, 131074, 2, 524323, 131074, 3, 524322, 65538, 3, 524321, 2, 3, 393243, 3, 0, 393244, 3, 0, 393245, 3, 0, 393246, 3, 0, 393247, 3, 0, 393248, 3, 0, 393249, 3, 0, 393250, 3, 0, 393251, 3, 0, 393252, 3, 0, 393253, 3, 0, 393254, 3, 0, 393255, 3, 0, 393256, 3, 0, 393257, 3, 0, 393242, 3, 1, 458778, 196611, 0, 524314, 196611, 0, 589850, 196611, 0, 655386, 196611, 0, 720922, 196611, 0, 786458, 196611, 0, 851994, 196611, 0, 917530, 196611, 0, 983066, 196611, 0, 1048602, 196611, 0, 1114138, 196611, 0, 1179674, 196611, 0, 1245210, 196611, 0, 1310746, 196611, 0, 1376282, 196611, 0, 1441818, 196611, 0, 1507354, 196611, 0, 1572890, 196611, 0, 1638426, 196611, 0, 1703962, 196611, 0, 1703978, 131075, 0, 1638442, 131075, 0, 1572906, 131075, 0, 1507370, 131075, 0, 1441834, 131075, 0, 1376298, 131075, 0, 1310762, 131075, 0, 1245226, 131075, 0, 1179690, 131075, 0, 1114154, 131075, 0, 1048618, 131075, 0, 983082, 131075, 0, 917546, 131075, 0, 589866, 2, 0, 655402, 2, 1, 589867, 2, 0, 655403, 2, 1, 720938, 65536, 0, 786475, 65536, 0, 720939, 65536, 0, 786474, 65536, 0, 852010, 131075, 1, 852011, 65539, 0, 852012, 65539, 2, 786476, 131075, 0, 720940, 131075, 0, 655404, 131075, 0, 589868, 131075, 0, 524332, 65539, 1, 524331, 3, 0, 524330, 131075, 2, 458794, 131075, 0, 393258, 65539, 1, 1769498, 3, 2, 1769514, 65539, 2, 1769513, 65539, 0, 1769512, 65539, 0, 1769511, 65539, 0, 1769510, 65539, 0, 1769509, 65539, 0, 1769508, 65539, 0, 1769507, 65539, 0, 1769506, 65539, 0, 1769505, 65539, 0, 1769504, 65539, 0, 1769503, 65539, 0, 1769502, 65539, 0, 1769501, 65539, 0, 1769500, 65539, 0, 1769499, 65539, 0)
layer_1/name = "furniture"
layer_1/y_sort_enabled = true
layer_1/tile_data = PackedInt32Array(917538, 131073, 0, 917533, 131073, 0, 917543, 131073, 0, 1245218, 131073, 0, 1245223, 131073, 0, 1245213, 131073, 0, 655388, 1, 2)

[node name="Blackout" type="ColorRect" parent="."]
visible = false
z_index = 5
offset_left = -717.0
offset_top = -523.0
offset_right = 1941.0
offset_bottom = 1304.0
color = Color(0, 0, 0, 1)

[node name="CharacterBody2D" parent="." instance=ExtResource("2_2jkle")]
position = Vector2(552, 241)

[node name="collisions" type="StaticBody2D" parent="."]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="collisions"]
polygon = PackedVector2Array(433, 145, 671, 145, 671, 177, 703, 177, 703, 207, 671, 207, 671, 431, 433, 431, 433, 145, 377, 131, 374, 518, 733, 517, 732, 210, 764, 153, 720, 84, 388, 82, 355, 125)

[node name="HUD" type="CanvasLayer" parent="."]

[node name="HUD" parent="HUD" instance=ExtResource("15_4u2hr")]
z_index = 1

[node name="Pause" type="CanvasLayer" parent="."]

[node name="PauseMenu" parent="Pause" instance=ExtResource("3_r25av")]
z_index = 10

[node name="outclass_transition_point" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="outclass_transition_point"]
position = Vector2(690.75, 192)
shape = SubResource("RectangleShape2D_0km2x")

[node name="classmate1" parent="." instance=ExtResource("9_bmbdk")]
position = Vector2(471, 242)

[node name="teacher" parent="." instance=ExtResource("9_1vf5t")]
position = Vector2(551, 176)

[node name="classmate2" parent="." instance=ExtResource("11_714xq")]
position = Vector2(631, 243)

[node name="classmate3" parent="." instance=ExtResource("12_pcqvc")]
position = Vector2(471, 322)

[node name="classmate4" parent="." instance=ExtResource("13_3icma")]
position = Vector2(552, 322)

[node name="classmate5" parent="." instance=ExtResource("14_0jrxp")]
position = Vector2(632, 322)

[node name="commit_work_point" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="commit_work_point"]
position = Vector2(459, 171)
shape = SubResource("CircleShape2D_w1lo1")

[node name="BlackoutAnimate" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_aaekd")
}

[node name="Textbox" parent="." instance=ExtResource("16_wgcdo")]
visible = false

[connection signal="body_entered" from="outclass_transition_point" to="." method="_on_outclass_transition_point_body_entered"]
[connection signal="body_exited" from="outclass_transition_point" to="." method="_on_outclass_transition_point_body_exited"]
[connection signal="body_entered" from="commit_work_point" to="." method="_on_commit_work_point_body_entered"]
[connection signal="body_exited" from="commit_work_point" to="." method="_on_commit_work_point_body_exited"]
[connection signal="animation_finished" from="BlackoutAnimate" to="." method="_on_blackout_animate_animation_finished"]
